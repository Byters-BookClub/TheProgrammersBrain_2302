# yeonhkim 그는 신인가? 역시 코딩천재 코파일럿 연킴

## 서문 
하라는 철학자 과제는 안하고 3일 내내 gnl만 리팩토링하시더니... 
제발 gnl 그만하라고 옆에서 뭐라고 했었는데, 결과물을 보니 그럴만 하다는 생각이 들었습니다. 모든 함수가 간결하게 작성돼서 읽기 굉장히 편했습니다. 함수 개수도 6개밖에 사용안하신 게 참 대단하네요. 이제 필로소퍼 열심히 하시면 될 것 같습니다 ^_^

## 좋은점
매크로 상수를 적절히 사용해서 코드를 읽기가 쉽습니다.
각 함수와 변수 네이밍도 읽기 쉽고, 로직도 이해하기 쉬운 것 같습니다.
find_next_lf_id, do_read_next 함수에서 성공 여부를 반환하거나, 다른 변수에 추가로 저장하는 점도 가독성 면에서 하나의 변수로 처리하는 것보다 나은 것 같습니다. 
저같은 경우 eof를 만났을 때, 개행을 처리하는 함수를 각각 나눈 후, 필요시 eof 함수에서 개행을 처리하는 함수를 호출했는데 하나의 함수에서 flag변수로 구분하는 것도 좋은 것 같습니다.
무엇보다 우수한 점은 함수 각각의 로직도 간단하고, 기능별로 잘 분리되어 있다는 점인 것 같습니다.

## 개인적인 생각
append_buf_to_line 함수 반환형이 없는데, 해당 함수에 반환형을 사용한다면 malloc에 실패했을 때 좀 더 유연한 처리가 가능할 것 같습니다. 지금 로직에서도 크래쉬는 안나지만, 에러 상황에 함수가 종료되지 않고 진행이 계속 되는 것 같네요.  

맨 처음 반복문을 시작할 때 아직 읽지 않은 버퍼를 이용해서 동작이 시작됩니다. (개행 확인, append_to_buf) 이 때문에 처음에 이해하기 조금 어려웠습니다. static 구조체라 맴버 변수가 전부 0이니 해당 값을 함수에 대입한 후 결과를 확인함으로써 알 수 있긴 하지만...
만약 구조상 순서를 바꾸는 것이 가능하면, 맨 처음 부분만 버퍼를 먼저 읽고 그 다음 이어진 동작을 반복 하는 게 좀 더 자연스러울 것 같습니다.
(로직상 버퍼 읽기->개행검사-append or 종료 루틴으로 돌아가게 하려면 어쩔 수 없을 것 같기도 하네요) . 

읽고 난 후, 개행뒤에 남아있는 문자열을 offset으로 처리한 것 같습니다. (static 변수에는 읽은 그대로의 원본 버퍼가 담겨있고, 그 원본 버퍼에서 필요한 부분만 읽기 위해서)
static 변수에 필요한 문자열 부분만 잘라서 동적할당 이후에 저장하는 방식보다 효율적인 것 같습니다.
다만 개인적으로 offset의 의미를 파악하는게 생각보다 조금 어려웠습니다 ㅠㅠ
함수 읽을 때 순서가 find로next_lf_idx, append, do_read_next인데 do_read_next에서 항상 offset값을 0으로 만들어줘서 헷갈렸습니다. (위에 언급한 내용과 유사한듯..)
offset대신 다른 변수명을 고민해봤는데 마땅한게 떠오르진 않네요..  

리팩토링하면서 좋은 코드 만드시느라 고생하셨습니다 